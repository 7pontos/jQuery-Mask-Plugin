// jQuery Mask Plugin v1.9.1
// github.com/igorescobar/jQuery-Mask-Plugin
(function(f){"function"===typeof define&&define.amd?define(["jquery"],f):f(window.jQuery||window.Zepto)})(function(f){var l=function(a,d,c){var g=this,p,l;a=f(a);d="function"===typeof d?d(a.val(),void 0,a,c):d;var b={invalid:[],getCaret:function(){try{var k,q=0,b=a.get(0),e=document.selection,d=b.selectionStart;if(e&&!~navigator.appVersion.indexOf("MSIE 10"))k=e.createRange(),k.moveStart("character",a.is("input")?-a.val().length:-a.text().length),q=k.text.length;else if(d||"0"===d)q=d;return q}catch(c){}},
setCaret:function(k){try{if(a.is(":focus")){var q,b=a.get(0);b.setSelectionRange?b.setSelectionRange(k,k):b.createTextRange&&(q=b.createTextRange(),q.collapse(!0),q.moveEnd("character",k),q.moveStart("character",k),q.select())}}catch(e){}},events:function(){a.on("keydown.mask",function(){p=b.val()}).on("keyup.mask",b.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){a.keydown().keyup()},100)}).on("change.mask",function(){a.data("changed",!0)}).on("blur.mask",function(){p===a.val()||
a.data("changed")||a.trigger("change");a.data("changed",!1)}).on("focusout.mask",function(){c.clearIfNotMatch&&!l.test(b.val())&&b.val("")})},getRegexMask:function(){for(var k=[],a,b,e,c,h=0;h<d.length;h++)(a=g.translation[d[h]])?(b=a.pattern.toString().replace(/.{1}$|^.{1}/g,""),e=a.optional,(a=a.recursive)?(k.push(d[h]),c={digit:d[h],pattern:b}):k.push(e||a?b+"?":b)):k.push(d[h].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));k=k.join("");c&&(k=k.replace(RegExp("("+c.digit+"(.*"+c.digit+")?)"),"($1)?").replace(RegExp(c.digit,
"g"),c.pattern));return RegExp(k)},destroyEvents:function(){a.off("keydown keyup paste drop change blur focusout ".split(" ").join(".mask ")).removeData("changed")},val:function(k){var b=a.is("input")?"val":"text";0<arguments.length?(a[b](k),b=a):b=a[b]();return b},getMCharsBeforeCount:function(b,a){for(var c=0,e=0,f=d.length;e<f&&e<b;e++)g.translation[d.charAt(e)]||(b=a?b+1:b,c++);return c},caretPos:function(a,c,f,e){return g.translation[d.charAt(Math.min(a-1,d.length-1))]?Math.min(a+f-c-e,f):b.caretPos(a+
1,c,f,e)},behaviour:function(a){a=a||window.event;b.invalid=[];var c=a.keyCode||a.which;if(-1===f.inArray(c,g.byPassKeys)){var d=b.getCaret(),e=b.val(),m=e.length,h=d<m,r=b.getMasked(),n=r.length,p=b.getMCharsBeforeCount(n-1)-b.getMCharsBeforeCount(m-1);r!==e&&b.val(r);!h||65===c&&a.ctrlKey||(8!==c&&46!==c&&(d=b.caretPos(d,m,n,p)),b.setCaret(d));return b.callbacks(a)}},getMasked:function(a){var f=[],p=b.val(),e=0,m=d.length,h=0,r=p.length,n=1,l="push",u=-1,t,w;c.reverse?(l="unshift",n=-1,t=0,e=m-
1,h=r-1,w=function(){return-1<e&&-1<h}):(t=m-1,w=function(){return e<m&&h<r});for(;w();){var x=d.charAt(e),v=p.charAt(h),s=g.translation[x];if(s)v.match(s.pattern)?(f[l](v),s.recursive&&(-1===u?u=e:e===t&&(e=u-n),t===u&&(e-=n)),e+=n):s.optional?(e+=n,h-=n):s.fallback?(f[l](s.fallback),e+=n):b.invalid.push({p:h,v:v,e:s.pattern}),h+=n;else{if(!a)f[l](x);v===x&&(h+=n);e+=n}}a=d.charAt(t);m!==r+1||g.translation[a]||f.push(a);return f.join("")},callbacks:function(f){var g=b.val(),l=g!==p,e=[g,f,a,c],m=
function(a,b,d){"function"===typeof c[a]&&b&&c[a].apply(this,d)};m("onChange",!0===l,e);m("onKeyPress",!0===l,e);m("onComplete",g.length===d.length,e);m("onInvalid",0<b.invalid.length,[g,f,a,b.invalid,c])}};g.mask=d;g.options=c;g.remove=function(){var c=b.getCaret();b.destroyEvents();b.val(g.getCleanVal());b.setCaret(c-b.getMCharsBeforeCount(c));return a};g.getCleanVal=function(){return b.getMasked(!0)};g.init=function(d){d=d||!1;c=c||{};g.byPassKeys=[9,16,17,18,36,37,38,39,40,91];g.translation={0:{pattern:/\d/},
9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};g.translation=f.extend({},g.translation,c.translation);g=f.extend(!0,{},g,c);l=b.getRegexMask();!1===d?(c.placeholder&&a.attr("placeholder",c.placeholder),a.attr("autocomplete","off"),b.destroyEvents(),b.events(),d=b.getCaret(),b.val(b.getMasked()),b.setCaret(d+b.getMCharsBeforeCount(d,!0))):(b.events(),b.val(b.getMasked()))};g.init(!a.is("input"))},y={},A=function(){var a=f(this),d={},c=
a.attr("data-mask");a.attr("data-mask-reverse")&&(d.reverse=!0);a.attr("data-mask-clearifnotmatch")&&(d.clearIfNotMatch=!0);if(z(a,c,d))return a.data("mask",new l(this,c,d))},z=function(a,d,c){c=c||{};a=f(a).data("mask");var g=JSON.stringify;try{return"object"!==typeof a||g(a.options)!==g(c)||a.mask!==d}catch(l){}};f.fn.mask=function(a,d){d=d||{};var c=this.selector,g=f.jMaskGlobals,p=function(){if(z(this,a,d))return f(this).data("mask",new l(this,a,d))};f(this).each(p);g.watchInputs&&(c&&""!==c&&
!y[c])&&(y[c]=!0,setInterval(function(){f(document).find(c).each(p)},300));g.dataMask&&f("*[data-mask]").each(A);g.watchDataMask&&setInterval(function(){f(document).find(g.nonInput).filter("*[data-mask]").each(A)},300)};f.fn.unmask=function(){try{return this.each(function(){f(this).data("mask").remove().removeData("mask")})}catch(a){}};f.fn.cleanVal=function(){return this.data("mask").getCleanVal()};f.jMaskGlobals={nonInput:"td,span,div",dataMask:!0,watchInputs:!0,watchDataMask:!1}});
